illegal castling, but like, the rook didn't move
well, you got out of check, but you also put yourself in check again

add caching (non-threaded)
try to make caching threaded